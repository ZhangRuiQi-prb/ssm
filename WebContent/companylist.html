<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="description" content="">
<meta name="author" content="ThemeBucket">
<link rel="shortcut icon" href="#" type="image/png">
<!--<link href="media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
   <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/>-->

<title>Dynamic Table</title>
<link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

<!--dynamic table-->
<link href="js/advanced-datatable/css/demo_page.css" rel="stylesheet" />
<link href="js/advanced-datatable/css/demo_table.css" rel="stylesheet" />
<link rel="stylesheet" href="js/data-tables/DT_bootstrap.css" />

<link href="css/style.css" rel="stylesheet">
<link href="css/style-responsive.css" rel="stylesheet">

<link rel="stylesheet" href="css/bootstrap-table.css" />
<link rel="stylesheet" type="text/css" href="js/bootstrap-datepicker/css/datepicker-custom.css" />
<link rel="stylesheet" type="text/css" href="js/bootstrap-daterangepicker/daterangepicker-bs3.css" />
<link rel="stylesheet" type="text/css" href="js/bootstrap-datetimepicker/css/datetimepicker-custom.css" />
   <!--file upload-->
<link rel="stylesheet" type="text/css" href="css/bootstrap-fileupload.min.css" />
<link rel="stylesheet" type="text/css" href="css/jquery-confirm.css"/>
</head>

<body class="sticky-header">

	<section>
		<!-- left side start-->
		<div class="left-side sticky-left-side">

			<!--logo and iconic logo start-->
			<div class="logo">
				<a href="index.html"><img src="images/logo.png" alt=""></a>
			</div>

			<div class="logo-icon text-center">
				<a href="index.html"><img src="images/logo_icon.png" alt=""></a>
			</div>
			<!--logo and iconic logo end-->


			<div class="left-side-inner">

				<!-- visible to small devices only -->
				<div class="visible-xs hidden-sm hidden-md hidden-lg">
					<div class="media logged-user">
						<img alt="" src="images/photos/user-avatar.png"
							class="media-object">
						<div class="media-body">
							<h4>
								<a href="#">John Doe</a>
							</h4>
							<span>"Hello There..."</span>
						</div>
					</div>

					<h5 class="left-nav-title">Account Information</h5>
					<ul class="nav nav-pills nav-stacked custom-nav">
						<li><a href="#"><i class="fa fa-user"></i> <span>Profile</span></a></li>
						<li><a href="#"><i class="fa fa-cog"></i> <span>Settings</span></a></li>
						<li><a href="#"><i class="fa fa-sign-out"></i> <span>Sign
									Out</span></a></li>
					</ul>
				</div>

				<!--sidebar nav start-->
				<ul class="nav nav-pills nav-stacked custom-nav">
					<li><a href="index.html"><i class="fa fa-home"></i> <span>Dashboard</span></a></li>
					<li class="menu-list"><a href=""><i class="fa fa-laptop"></i>
							<span>Layouts</span></a>
						<ul class="sub-menu-list">
							<li><a href="blank_page.html"> Blank Page</a></li>
							<li><a href="boxed_view.html"> Boxed Page</a></li>
							<li><a href="leftmenu_collapsed_view.html"> Sidebar
									Collapsed</a></li>
							<li><a href="horizontal_menu.html"> Horizontal Menu</a></li>

						</ul></li>
					<li class="menu-list"><a href=""><i class="fa fa-book"></i>
							<span>UI Elements</span></a>
						<ul class="sub-menu-list">
							<li><a href="general.html"> General</a></li>
							<li><a href="buttons.html"> Buttons</a></li>
							<li><a href="tabs-accordions.html"> Tabs & Accordions</a></li>
							<li><a href="typography.html"> Typography</a></li>
							<li><a href="slider.html"> Slider</a></li>
							<li><a href="panels.html"> Panels</a></li>
						</ul></li>
					<li class="menu-list"><a href=""><i class="fa fa-cogs"></i>
							<span>Components</span></a>
						<ul class="sub-menu-list">
							<li><a href="grids.html"> Grids</a></li>
							<li><a href="gallery.html"> Media Gallery</a></li>
							<li><a href="calendar.html"> Calendar</a></li>
							<li><a href="tree_view.html"> Tree View</a></li>
							<li><a href="nestable.html"> Nestable</a></li>

						</ul></li>

					<li><a href="fontawesome.html"><i class="fa fa-bullhorn"></i>
							<span>Fontawesome</span></a></li>

					<li class="menu-list"><a href=""><i class="fa fa-envelope"></i>
							<span>Mail</span></a>
						<ul class="sub-menu-list">
							<li><a href="mail.html"> Inbox</a></li>
							<li><a href="mail_compose.html"> Compose Mail</a></li>
							<li><a href="mail_view.html"> View Mail</a></li>
						</ul></li>

					<li class="menu-list"><a href=""><i class="fa fa-tasks"></i>
							<span>Forms</span></a>
						<ul class="sub-menu-list">
							<li><a href="form_layouts.html"> Form Layouts</a></li>
							<li><a href="form_advanced_components.html"> Advanced
									Components</a></li>
							<li><a href="form_wizard.html"> Form Wizards</a></li>
							<li><a href="form_validation.html"> Form Validation</a></li>
							<li><a href="editors.html"> Editors</a></li>
							<li><a href="inline_editors.html"> Inline Editors</a></li>
							<li><a href="pickers.html"> Pickers</a></li>
							<li><a href="dropzone.html"> Dropzone</a></li>
						</ul></li>
					<li class="menu-list"><a href=""><i
							class="fa fa-bar-chart-o"></i> <span>Charts</span></a>
						<ul class="sub-menu-list">
							<li><a href="flot_chart.html"> Flot Charts</a></li>
							<li><a href="morris.html"> Morris Charts</a></li>
							<li><a href="chartjs.html"> Chartjs</a></li>
							<li><a href="c3chart.html"> C3 Charts</a></li>
						</ul></li>
					<li class="menu-list nav-active"><a href="#"><i
							class="fa fa-th-list"></i> <span>Data Tables</span></a>
						<ul class="sub-menu-list">
							<li><a href="basic_table.html"> Basic Table</a></li>
							<li class="active"><a href="dynamic_table.html">
									Advanced Table</a></li>
							<li><a href="responsive_table.html"> Responsive Table</a></li>
							<li><a href="editable_table.html"> Edit Table</a></li>
						</ul></li>

					<li class="menu-list"><a href="#"><i
							class="fa fa-map-marker"></i> <span>Maps</span></a>
						<ul class="sub-menu-list">
							<li><a href="google_map.html"> Google Map</a></li>
							<li><a href="vector_map.html"> Vector Map</a></li>
						</ul></li>
					<li class="menu-list"><a href=""><i
							class="fa fa-file-text"></i> <span>Extra Pages</span></a>
						<ul class="sub-menu-list">
							<li><a href="profile.html"> Profile</a></li>
							<li><a href="invoice.html"> Invoice</a></li>
							<li><a href="pricing_table.html"> Pricing Table</a></li>
							<li><a href="timeline.html"> Timeline</a></li>
							<li><a href="blog_list.html"> Blog List</a></li>
							<li><a href="blog_details.html"> Blog Details</a></li>
							<li><a href="directory.html"> Directory </a></li>
							<li><a href="chat.html"> Chat </a></li>
							<li><a href="404.html"> 404 Error</a></li>
							<li><a href="500.html"> 500 Error</a></li>
							<li><a href="registration.html"> Registration Page</a></li>
							<li><a href="lock_screen.html"> Lockscreen </a></li>
						</ul></li>
					<li><a href="login.html"><i class="fa fa-sign-in"></i> <span>Login
								Page</span></a></li>

				</ul>
				<!--sidebar nav end-->

			</div>
		</div>
		<!-- left side end-->

		<!-- main content start-->
		<div class="main-content">

			<!-- header section start-->
			<div class="header-section">

				<!--toggle button start-->
				<a class="toggle-btn"><i class="fa fa-bars"></i></a>
				<!--toggle button end-->

				<!--search start-->
				<form class="searchform" action="index.html" method="post">
					<input type="text" class="form-control" name="keyword"
						placeholder="Search here..." />
				</form>
				<!--search end-->

				<!--notification menu start -->
				<div class="menu-right">
					<ul class="notification-menu">
						<li>
							<a href="#" class="btn btn-default dropdown-toggle"
							data-toggle="dropdown"> 
								<img src="images/photos/user1.png" id="ssimg" alt="" /> 
								<span id="spanusn"> Doe7</span> 
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu dropdown-menu-usermenu pull-right">
								<li><a href="#"><i class="fa fa-user"></i> Profile</a></li>
								<li><a href="#"><i class="fa fa-cog"></i> Settings</a></li>
								<li><a href="#"><i class="fa fa-sign-out"></i> Log Out</a></li>
							</ul>
						</li>

					</ul>
				</div>
				<!--notification menu end -->

			</div>
			<!-- header section end-->

			<!-- page heading start-->
			<div class="page-heading">
				<h3>公司列表</h3>
				<ul class="breadcrumb">
					<li><a href="#">Dashboard</a></li>
					<li><a href="#">Data Tables</a></li>
					<li class="active">Dynamic Table</li>
				</ul>
			</div>
			<!-- page heading end-->

			<!--body wrapper start-->
			<div class="wrapper">
				<div class="row">
					<div class="col-sm-12">
						<section class="panel">
							<header class="panel-heading">
								公司列表 <span class="tools pull-right"> <a
									href="javascript:;" class="fa fa-chevron-down"></a> <a
									href="javascript:;" class="fa fa-times"></a>
								</span>
							</header>
							<div class="panel-body">
								<!-- <div di="searchForm2" style="width: 3800px;"  >
									<a class="btn btn-primary" data-toggle="modal" href="#myModal2">
									Add New
									</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;						   			
									<label>学号:</label>
										<div class="btn-group" style="width: 100px;">
											<input type="text" class="form-control" id="id2" >
										</div> &nbsp;&nbsp;&nbsp;
									<label>学生姓名:</label>
										<div class="btn-group" style="width: 120px;">
											<input type="text" id="name2" class="form-control">
										</div>&nbsp;&nbsp;&nbsp;
									<label>实习公司:</label>
										<div class="btn-group" style="width: 130px;">
											<select class="form-control" style="width: 130px;" id="companyItems1" name="">
											</select>
										</div>&nbsp;&nbsp;&nbsp;
									<label >实习岗位:</label>
										<div class="btn-group"  style="width: 130px;">							   
											<select class="form-control" style="width: 130px;" id="positionItems1" name="">			   																
											</select>
										</div>&nbsp;&nbsp;&nbsp;
									<label >所学专业:</label>
										<div class="btn-group" style="width: 130px;">
											<select class="form-control" style="width: 130px;" id="majorItems1" name="">			   																
											</select>
										</div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<a class="btn btn-success" id="searchBtn" style="width: 135px;" data-toggle="modal" href="javascript:;">
									Search</a> 																			
								</div> -->
							
							
								<div class="adv-table">
									<!-- <a class="btn btn-primary" data-toggle="modal" href="#myModal2">
										Add New </a> -->
									<!---->
									<!-- insert  Modal -->
									<div class="modal fade" id="myModal2" tabindex="-1"
										role="dialog" aria-labelledby="myModalLabel"
										aria-hidden="true">
										<div class="modal-dialog">
											<div class="modal-content">
												<div class="modal-header">
													<button type="button" class="close" data-dismiss="modal"
														aria-hidden="true">&times;</button>
													<h4 class="modal-title">添加学生</h4>
												</div>
												<div class="modal-body">
													<form action="files/upload.action" class="form-horizontal " id="formStu"
														method="post" enctype="multipart/form-data">

														<div class="form-group">
															<label class="control-label col-md-4">姓名</label>
															<div class="col-md-6 col-xs-11">
																<input
																	class="form-control form-control-inline input-medium default-date-picker"
																	size="16" type="text" value="" id="sname" name="sname"/> 
															</div>
														</div>

														<div class="form-group">
															<label class="control-label col-md-4">年龄</label>
															<div class="col-md-6 col-xs-11">
																<input
																	class="form-control form-control-inline input-medium default-date-picker"
																	size="30" type="text" value="" id="sage" name="sage"/> 
															</div>
														</div>
														
														<div class="form-group">
															<label class="control-label col-md-4">性别</label>
															<div class="col-md-6 col-xs-11">
																<input checked="checked" class="rdo" value="男" type="radio"  name="ssex">男                                 
																<input  type="radio" class="rdo" name="ssex"  value="女">女                                                      
															</div>
														</div>              
														
														<div class="form-group">
															<label class="control-label col-md-4">头像</label>
															<div class="col-md-6 col-xs-11">
																<div class="fileupload fileupload-new" data-provides="fileupload">
																	<div class="fileupload-new thumbnail" style="width: 200px; height: 150px;">
																		<img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&amp;text=no+image" alt="" />
																	</div>
																	<div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>
																	<div>
																		<span class="btn btn-default btn-file">
																			<span class="fileupload-new"><i class="fa fa-paper-clip"></i>选择图片</span>
																			<span class="fileupload-exists"><i class="fa fa-undo"></i> 更换</span>
																			<input type="file" class="default" name="file1" id="file1" />
																		</span>
																		<a href="#" class="btn btn-danger fileupload-exists" data-dismiss="fileupload">
																		<i class="fa fa-trash"></i> 移除</a>
																	</div>
																</div>
															</div>
														</div> 
														
														<div class="form-group">
															<label class="control-label col-md-4">专业</label>
															<div class="col-md-6 col-xs-11">
																<select id="s_mid" name="s_mid" class="form-control input-lg m-bot15">
																	
																</select> <span class="help-block">请选择您所在专业</span>
															</div>
														</div>

														<div class="modal-footer">
															<!-- <input data-dismiss="modal" class="btn btn-primary"
																type="submit" value="提交" id="btn"> -->
															<button type="submit" class="btn btn-primary" id="btn">提交</button>
															<button data-dismiss="modal" class="btn btn-primary"
																type="button">关闭</button>
														</div>
													</form>
												</div>

											</div>
										</div>
									</div>
									
									
									<!-- major  modal -->
									
									<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">  
            					    	<div class="modal-dialog" role="document">  
            					        	<div class="modal-content">  
            					            	<div class="modal-header">  
            					                	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
            					                	<span  aria-hidden="true">×</span></button>  
            					                	<h4 class="modal-title" id="exampleModalLabel"></h4>  
            					            	</div>  
            					            	<div class="modal-body">  
            					                	<form>  
            					                    	<div>  
            					                        	<h3 class="color-terques" id="recipient-name"></h3>  
            					                    	</div>  
            					                    	<div class="form-group">  
            					                        	<label for="message-text" class="control-label">
            					                        	<img  width="50" height="47" id="message-img" src=""></label>  
            					                        	<span id="message-text" style="font-size:20px" ></span> 
            					                        	<input id="message-pid" type="hidden"  /> 
            					                   	 	</div>  
            					                	</form>  
            					            	</div>  
            					            	<div class="modal-footer">  
            					            	<!--  -->
            										<button type="button" style="width: 200px;" id="sendModel" 
            								  			class="btn btn-primary">提交实习申请</button>  
            					                	<button type="button" style="width: 100px;" class="btn btn-default" data-dismiss="modal">Close</button>              					               
            					            	</div>  
            					        	</div>  
            					    	</div>  
            						</div>  
                            <!-- modal -->
									
								
								
									<!---->
									<!-- <table id="table1" data-url="user/list.action"
										data-toggle="table" data-search="true" data-show-toggle="true"
										data-page-list="[5, 10, 15]" data-pagination="true"
										data-show-export="true" data-click-to-select="true"
										data-show-columns="true" data-side-pagination="client">
										<thead>
											<tr>
												map.put("uid", user.getId());
													map.put("uname", user.getName());
													map.put("upwd", user.getPwd());
												<th data-field="uid">id</th>
												<th data-field="uname">name</th>
												<th data-field="upwd">pwd</th>
												<th data-field="aid">aid</th>
												<th data-field="atype">atype</th>
												<th class="hidden-phone">Engine version</th>
												<th class="hidden-phone">CSS grade</th>
											</tr>
										</thead>
									</table> -->
									
									<table id="table2">
										
									</table>
								</div>
							</div>
						</section>


						<section class="panel">
							<header class="panel-heading">
								<img id="cimage" width="45" height="40"
									src="images/comps/huawei.jpg" />
								<input type="hidden" id="ccid" value="" /> 
								<span id="cmid">华为</span>
							</header>
							<div class="panel-body">
								<table id="table3">

								</table>
							</div>
							<div class="panel-body">

							</div>
						</section>
						
						<section class="panel">	
							<div class="panel-body">
								<div id="container" style="height: 400px"></div>
							 </div>
						</section>
						
					</div>
				</div>

			</div>
			<!--body wrapper end-->

			<!--footer section start-->
			<footer> 2014 &copy; AdminEx by ThemeBucket </footer>
			<!--footer section end-->


		</div>
		<!-- main content end-->
	</section>

	<!-- Placed js at the end of the document so the pages load faster -->
	<script src="js/jquery-1.10.2.min.js"></script>
	<script src="js/jquery-ui-1.9.2.custom.min.js"></script>
	<script src="js/jquery-migrate-1.2.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/modernizr.min.js"></script>
	<script src="js/jquery.nicescroll.js"></script>
	<!--dynamic table-->
	<script src="js/bootstrap-table.js"></script>
	<script src="js/bootstrap-table-export.js"></script>
	<script src="js/bootstrap-table-zh-CN.js"></script>
	<script src="js/tableExport.js"></script>

	<script type="text/javascript" language="javascript"
		src="js/advanced-datatable/js/jquery.dataTables.js"></script>
	<script type="text/javascript" src="js/data-tables/DT_bootstrap.js"></script>
	<!--dynamic table initialization -->
	<script src="js/dynamic_table_init.js"></script>
	<!--file upload-->
	<script type="text/javascript" src="js/bootstrap-fileupload.min.js"></script>
	<script src="js/jquery.form.js" type="text/javascript"></script>
	<script src="js/fileload.js" type="text/javascript"></script>
	<!--common scripts for all pages-->
	<script src="js/scripts.js"></script>
	
	<script src="https://code.highcharts.com.cn/highcharts/highcharts.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/highcharts-3d.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/modules/exporting.js"></script>
    <script src="https://img.hcharts.cn/highcharts-plugins/highcharts-zh_CN.js"></script>
	
	<script type="text/javascript">
		$(document).ready(function() {
			//  判断学生login 状态
			var prolist={};//一串学生登录的信息
			if(window.localStorage){
					//读取HTML5中的缓存，key是deptlist，而且读取出来text格式，还需要JSON.p.. text转换为json格式
					prolist=localStorage.getItem("stuDetail");//JSON.parse(   .parseJSON()
			}else{
					prolist=Cookie.read("stuDetail");
			}
			if(prolist!=null && prolist!=""){
				prolist=JSON.parse(prolist);	
				alert(prolist.sid+"-"+prolist.sname+"-"+prolist.mname+"-"+prolist.simg+
				"-"+prolist.scid);
				$("#ssimg").attr("src","images/photos/"+prolist.simg);
				$("#spanusn").html(prolist.mname+" : "+prolist.sname);
			}else{
				alert("请先登录，然后查看企业详情");
				location.href="login.html";
			}
			$("#table2").bootstrapTable({
				url: 'stu/compDetail.action',
				method : 'post', //
				contentType:"application/x-www-form-urlencoded",
				striped : true, //是否显示行间隔色
				//toolbar: '#searchForm1',//searchForm1               
				pagination : true, //是否显示分页（*）
				//queryParams : queryParams,
		         pageSize : 5, //初始化页大小
					pageList : [ 3, 5, 10 ],//data-page-list="[4, 7, 15]"
					singleSelect : true,
					sortable : true, //是否启用排序 				
					sidePagination : "client", //分页方式：client客户端分页，server服务端分页（*）
					strictSearch : true,
					minimumCountColumns : 2, //最少允许的列数
					clickToSelect : true, //是否启用点击选中行
					showRefresh : false, //是否显示刷新按钮
					uniqueId : "sid", //每一行的唯一标识，一般为主键列
					//cardView : true, //是否显示详细视图
					search : true,
					strictSearch : true,
					showColumns : true,
					showRefresh : true,
					showExport:true,
				onLoadError : function(data) {
					$('#table2').bootstrapTable('removeAll');
				},
				columns : [{
			        title: 'Image',
			        field: 'cimg',
			        align: 'center',
			        formatter:function(value,row,index){		        	
			        	var d ="<img src='images/comps/"+row.cimg+"' title='"+row.cid+
			        	"' width='40' height='35' />";
			        	//row.sid得bootstrap当前table的一行找到   
			        	return d;
			        }
			    },{
					field : 'cid',
					title : 'ID',
					align : 'center',
		            sortable : true
				},{
					field : 'cname',
					title : '公司',
					align : 'center',
		            sortable : true
				},{
					field : 'ctime',
					title : '注册时间',
					align : 'center',
		            sortable : true
				},{
					field : 'cpos',
					title : '实习岗位',
					align : 'center',
		            sortable : true
				},{
					field : 'cnum',
					title : '实习人数',
					align : 'center',
		            sortable : true
				},{
					field : 'allnums',
					title : '岗位需求数量',
					align : 'center',
		            sortable : true
				},{
					field : 'cmoney',
					title : '平均工资',
					align : 'center',
		            sortable : true
				},{
					field : 'czhuc',
					title : '注册资金',
					align : 'center',
		            sortable : true
				},{
			        title: '操作',
			        field: 'un',
			        align: 'center',
			        formatter:function(value,row,index){	
			        	
			        	if(index==0){
			        		//说明遍历第一行json的时候，第一次创建子表
			        		$("#cimage").attr("src","images/comps/"+row.cimg) 
			        		$("#cmid").html(row.cname);
			        		$("#ccid").val(row.cid);
			        		detailcoms(row.cid);
			        	}
			        	
			        //把之前的列表链接 一行记录json {“uid”:2,"uname":....}	就是参数 row
			        	//var d ="<a href='javascript:void(0);' id='delequ' >Detail</a>";
			        	//row.uid得bootstrap当前table的一行找到   
			        	
						var s="&nbsp;<button class='btn btn-success' title='"+row.cid+
						    "' id='companyDetail' type='button'>Detail</button>";
			        	return s;
			        }
			    }],onClickRow: function (row, $element){
					$("#cimage").attr("src","images/comps/"+row.cimg) 
	        		$("#cmid").html(row.cname);
					$("#ccid").val(row.cid);
					refreshTable(row.cid);
			    }
		   });
			
			$(document).on("click","#companyDetail",function(){
				var id=$(this).attr("title");
				location.href="detail_comps2.html?cid="+id;
			})
			
			
			function refreshTable(cid){
				//alert("ccid:"+cid);
				$.ajax({
					url:"stu/compDetail2.action",
					method:"post",
					dataType:"json",	
					data:{
						ccid:cid 
					},	
					success:function(data){
						//自定义搜索，delete update操作都可以沿用load函数
						$("#table3").bootstrapTable('load',data);
					},
					error:function(){
						alert("error");
					}
				});
			}
			
			function detailcoms(data){
				$("#table3").bootstrapTable({
					url: 'stu/compDetail2.action',
					method : 'post', //
					contentType:"application/x-www-form-urlencoded",
					striped : true, //是否显示行间隔色
					//toolbar: '#searchForm1',//searchForm1               
					pagination : true, //是否显示分页（*）
					//queryParams : queryParams,
			         pageSize : 5, //初始化页大小
						pageList : [ 3, 5, 10 ],//data-page-list="[4, 7, 15]"
						singleSelect : true,
						sortable : true, //是否启用排序 				
						sidePagination : "client", //分页方式：client客户端分页，server服务端分页（*）
						//bootstrapTable 请求一参数给服务端
						queryParams : function(params){
							return{
								ccid:data
							};
						},
						minimumCountColumns : 2, //最少允许的列数
						clickToSelect : true, //是否启用点击选中行
						uniqueId : "cpid", //每一行的唯一标识，一般为主键列
					onLoadError : function(data) {
						$('#table3').bootstrapTable('removeAll');
					},
					columns : [{
				        title: 'Image',
				        field: 'pimg',
				        align: 'center',
				        formatter:function(value,row,index){		        	
				        	var d ="<img src='images/projects/"+row.pimg+"' title='"+row.cpid+
				        	"' width='40' height='35' />";
				        	//row.sid得bootstrap当前table的一行找到   
				        	return d;
				        }
				    },{
						field : 'pname',
						title : '实习岗位',
						align : 'center',
			            sortable : true
					},{
						field : 'cprequire',
						title : '岗位要求',
						align : 'center',
			            sortable : true
					},{
						field : 'cpnums',
						title : '岗位需求数量',
						align : 'center',
			            sortable : true
					},{
						field : 'cpsalary',
						title : '实习薪水',
						align : 'center',
			            sortable : true
					},{
						field : 'nums',
						title : '已实习人数',
						align : 'center',
			            sortable : true
					},{
				        title: '操作',
				        field: 'un',
				        align: 'center',
				        formatter:function(value,row,index){	
				        //把之前的列表链接 一行记录json {“uid”:2,"uname":....}	就是参数 row
				        	//var d ="<a href='javascript:void(0);' id='delequ' >Detail</a>";
				        	//row.uid得bootstrap当前table的一行找到   
				        	if(row.nums <row.cpnums){
					        	var d ="<button type='button' class='btn btn-danger' data-toggle='modal'"+
								        " data-target='#exampleModal' data-pname='"+row.pname+"' data-pid ='"+
								        row.pid+"'data-pimg='"+ row.pimg+"'>申请实习</button>"; 
				        	}else{
				        		var d ="<span class='btn btn-danger' '>人数已满</span>";
				        	}
				        	return d;
				        }
				    }],onClickRow: function (row, $element){
				    	//触发chart图，但是提交两个id 企业cid 一个岗位pid
						var ccid=$("#ccid").val();//从隐藏域拿到当前企业cid
						var ppid=row.pid;
						//alert(ccid+" - "+ppid);
						chartFunc(ccid,ppid);
				    }
			   });
				
			}
			
			$('#exampleModal').on('show.bs.modal', function (event) {  
		        var button = $(event.relatedTarget) // 触发事件的按钮  
		        var pname = button.data('pname') // 解析出data-whatever内容 	
				var pid = button.data('pid');
		        var pimg=button.data('pimg');
		        var modal = $(this) 
		        var test=null;
		        if(prolist.scid==0){
		        	test="确认选择 ";//insert
				}else{
					test="确认修改 ";//update
				}
		        modal.find('.modal-body #recipient-name').html(test+$("#cmid").html()+" 如下实习岗位") ; 
				modal.find('.modal-body #message-text').html(pname) ; 	
				modal.find('.modal-body #message-pid').val(pid) ; 
				modal.find('.modal-body #message-img').attr("src","images/projects/"+pimg) ; 
		    });	
			
			//chart
			function chartFunc(ccid, ppid){
				$.ajax({
					url:"stu/majorChart.action",
					method:"post",
					dataType:"json",	
					data:{
						ccid:ccid,
						ppid:ppid
					},	
					success:function(data){
						tablezi(data);
					},
					error:function(){
						alert("e2err");
					}
				});
			}
			
			
			function tablezi(data){
				var chart = Highcharts.chart('container', {
						chart: {
								type: 'pie',
								options3d: {
										enabled: true,
										alpha: 45
								}
						},
						title: {
								text: data.title
						},
						subtitle: {
								text: ''
						},
						plotOptions: {
								pie: {
										innerSize: 100,
										depth: 45
								}
						},
						series: [{
								name: data.name,
								data: data.lists
						}]
				});
			}
			
			
		})
		
		

	</script>


	
</body>
</html>
